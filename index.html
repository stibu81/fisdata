<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Query Data From the FIS Web Page • fisdata</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Query Data From the FIS Web Page">
<meta name="description" content="Query data from the web site of the International Ski and Snowboard Federation FIS (&lt;https://www.fis-ski.com&gt;).">
<meta property="og:description" content="Query data from the web site of the International Ski and Snowboard Federation FIS (&lt;https://www.fis-ski.com&gt;).">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">fisdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/stibu81/fisdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="fisdata-">fisdata <img src="reference/figures/fisdata_logo.png" align="right" width="175"><a class="anchor" aria-label="anchor" href="#fisdata-"></a>
</h1></div>
<!-- badges: start -->

<p>fisdata makes it easy to download data from the <a href="https://www.fis-ski.com" class="external-link">FIS webpage</a> into tibbles.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of fisdata from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"stibu81/fisdata"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="available-querying-functions">Available Querying Functions<a class="anchor" aria-label="anchor" href="#available-querying-functions"></a>
</h2>
<p>fisdata currently offers four functions to query different types of data:</p>
<ul>
<li>
<code><a href="reference/query_athletes.html">query_athletes()</a></code>: query athletes by name and other attributes and obtain a table of matching athletes.</li>
<li>
<code><a href="reference/query_results.html">query_results()</a></code>: query all race results for a single athlete.</li>
<li>
<code><a href="reference/query_race.html">query_race()</a></code>: obtain the full results for a single race.</li>
<li>
<code><a href="reference/query_events.html">query_events()</a></code>: query events by date, place, and other attributes.</li>
</ul>
</div>
<div class="section level2">
<h2 id="running-a-query">Running a Query<a class="anchor" aria-label="anchor" href="#running-a-query"></a>
</h2>
<p>Since athletes are identified by a Competitor-ID and races by a Race-ID that are usually not known to the user, it is generally easiest to start a query by finding an athlete. For example, the following call gets the information for Didier Cuche:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stibu81.github.io/fisdata/">fisdata</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">cuche</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_athletes.html">query_athletes</a></span><span class="op">(</span><span class="st">"cuche"</span>, <span class="st">"didier"</span><span class="op">)</span></span>
<span><span class="va">cuche</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">active</span><span class="op">:</span><span class="va">nation</span>, <span class="va">sector</span>, <span class="va">brand</span>, <span class="va">competitor_id</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 7</span></span>
<span><span class="co">#&gt;   active fis_code name         nation sector brand competitor_id</span></span>
<span><span class="co">#&gt;   &lt;lgl&gt;  &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1 FALSE  510030   Cuche Didier SUI    AL     Head  11795</span></span></code></pre></div>
<p>The result includes the <code>competitor_id</code>, which is required as input in order to query an athlete’s results.</p>
<p>With the object returned by <code><a href="reference/query_athletes.html">query_athletes()</a></code>, it is now possible to query all the race result of an athlete. Note that <code><a href="reference/query_results.html">query_results()</a></code> must be called with a single athlete. The following query only obtains the results in downhill races:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cuche_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/query_results.html">query_results</a></span><span class="op">(</span><span class="va">cuche</span>, discipline <span class="op">=</span> <span class="st">"DH"</span><span class="op">)</span></span>
<span><span class="va">cuche_res</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">athlete</span><span class="op">:</span><span class="va">place</span>, <span class="va">category</span><span class="op">:</span><span class="va">rank</span>, <span class="va">race_id</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 303 × 7</span></span>
<span><span class="co">#&gt;    athlete      date       place      category  discipline  rank race_id</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;        &lt;date&gt;     &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;  </span></span>
<span><span class="co">#&gt;  1 Cuche Didier 2012-03-14 Schladming World Cup Downhill      17 66746  </span></span>
<span><span class="co">#&gt;  2 Cuche Didier 2012-03-13 Schladming Training  Downhill       1 66744  </span></span>
<span><span class="co">#&gt;  3 Cuche Didier 2012-03-03 Kvitfjell  World Cup Downhill      10 66811  </span></span>
<span><span class="co">#&gt;  4 Cuche Didier 2012-03-01 Kvitfjell  Training  Downhill       2 66809  </span></span>
<span><span class="co">#&gt;  5 Cuche Didier 2012-02-29 Kvitfjell  Training  Downhill       3 66810  </span></span>
<span><span class="co">#&gt;  6 Cuche Didier 2012-02-11 Sochi      World Cup Downhill      12 66801  </span></span>
<span><span class="co">#&gt;  7 Cuche Didier 2012-02-10 Sochi      Training  Downhill       7 66800  </span></span>
<span><span class="co">#&gt;  8 Cuche Didier 2012-02-08 Sochi      Training  Downhill       2 66798  </span></span>
<span><span class="co">#&gt;  9 Cuche Didier 2012-02-04 Chamonix   World Cup Downhill       7 66795  </span></span>
<span><span class="co">#&gt; 10 Cuche Didier 2012-02-03 Chamonix   World Cup Downhill       3 66767  </span></span>
<span><span class="co">#&gt; # ℹ 293 more rows</span></span></code></pre></div>
<p>The result includes the <code>race_id</code>, which is required as input in order to query the full results of a race.</p>
<p>By extracting one of the races from the table, one can now obtain the full results for that race. The following code gets the full result for Didier Cuche’s last victory in Wengen:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wengen_res</span> <span class="op">&lt;-</span> <span class="va">cuche_res</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">place</span> <span class="op">==</span> <span class="st">"Wengen"</span>, <span class="va">rank</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/query_race.html">query_race</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">wengen_res</span></span>
<span><span class="co">#&gt; # A tibble: 70 × 8</span></span>
<span><span class="co">#&gt;     rank   bib fis_code name               birth_year nation time      diff_time</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;                   &lt;int&gt; &lt;chr&gt;  &lt;Period&gt;  &lt;Period&gt; </span></span>
<span><span class="co">#&gt;  1     1    18 510030   Cuche Didier             1974 SUI    1M 50.31S 0S       </span></span>
<span><span class="co">#&gt;  2     2    12 292514   Heel Werner              1982 ITA    1M 51.17S 0.86S    </span></span>
<span><span class="co">#&gt;  3     3    15 511313   Janka Carlo              1986 SUI    1M 51.52S 1.21S    </span></span>
<span><span class="co">#&gt;  4     4     1 560332   Jerman Andrej            1978 SLO    1M 51.58S 1.27S    </span></span>
<span><span class="co">#&gt;  5     5     3 533866   Nyman Steven             1982 USA    1M 51.67S 1.36S    </span></span>
<span><span class="co">#&gt;  6     6    14 51005    Scheiber Mario           1983 AUT    1M 51.76S 1.45S    </span></span>
<span><span class="co">#&gt;  7     7    28 50858    Streitberger Georg       1981 AUT    1M 51.77S 1.46S    </span></span>
<span><span class="co">#&gt;  8     8    16 50041    Walchhofer Michael       1975 AUT    1M 51.79S 1.48S    </span></span>
<span><span class="co">#&gt;  9     8    11 50753    Kroell Klaus             1980 AUT    1M 51.79S 1.48S    </span></span>
<span><span class="co">#&gt; 10    10    25 293006   Innerhofer Christ…       1984 ITA    1M 51.85S 1.54S    </span></span>
<span><span class="co">#&gt; # ℹ 60 more rows</span></span></code></pre></div>
<p>Note that the objects created by the querying functions always include the URL that was downloaded. This URL can be obtained as follows:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/show_url.html">show_url</a></span><span class="op">(</span><span class="va">cuche_res</span><span class="op">)</span></span>
<span><span class="co">#&gt; https://www.fis-ski.com/DB/general/athlete-biography.html?sectorcode=AL&amp;seasoncode=&amp;competitorid=11795&amp;type=result&amp;categorycode=&amp;sort=&amp;place=&amp;disciplinecode=DH&amp;position=&amp;limit=2000</span></span></code></pre></div>
<p>You can copy this address into a browser in order to see the same data as they are presented on the FIS web site. To make this as easy as possible, <code><a href="reference/show_url.html">show_url()</a></code> automatically copies the URL into the clip board, when called from an interactive R session.</p>
</div>
<div class="section level2">
<h2 id="known-limitations">Known Limitations<a class="anchor" aria-label="anchor" href="#known-limitations"></a>
</h2>
<p>Querying athletes and results is expected to work for all sectors and disciplines. Querying races, however, is more difficult, since different types of races have their results rendered in different form on the FIS web site. fisdata is able to handle the results of many common types of races but it is expected to fail for some types that are not yet covered. For example, it usually cannot handle team races:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/query_athletes.html">query_athletes</a></span><span class="op">(</span><span class="st">"von allmen"</span>, <span class="st">"franjo"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/query_results.html">query_results</a></span><span class="op">(</span>category <span class="op">=</span> <span class="st">"WSC"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">discipline</span> <span class="op">==</span> <span class="st">"Team Combined"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/query_race.html">query_race</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in query_race(.): ! The data contains some fields unknown to fisdata.</span></span>
<span><span class="co">#&gt; ℹ Affected column: 'name'</span></span>
<span><span class="co">#&gt; ! These columns might not be processed as expected.</span></span>
<span><span class="co">#&gt; Warning in process_race_column(name, race_df): NAs introduced by coercion</span></span>
<span><span class="co">#&gt; Warning in process_race_column(name, race_df): NAs introduced by coercion</span></span>
<span><span class="co">#&gt; Warning in process_race_column(name, race_df): NAs introduced by coercion</span></span>
<span><span class="co">#&gt; Error in `dplyr::as_tibble()`:</span></span>
<span><span class="co">#&gt; ! Column names `nation` and `time` must not be duplicated.</span></span>
<span><span class="co">#&gt; Use `.name_repair` to specify repair.</span></span>
<span><span class="co">#&gt; Caused by error in `repaired_names()`:</span></span>
<span><span class="co">#&gt; ! Names must be unique.</span></span>
<span><span class="co">#&gt; ✖ These names are duplicated:</span></span>
<span><span class="co">#&gt;   * "nation" at locations 7 and 8.</span></span>
<span><span class="co">#&gt;   * "time" at locations 9 and 10.</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/stibu81/fisdata/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/stibu81/fisdata/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing fisdata</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Stefan Lanz <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/stibu81/fisdata/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/stibu81/fisdata/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/stibu81/fisdata" class="external-link"><img src="https://codecov.io/gh/stibu81/fisdata/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stefan Lanz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
